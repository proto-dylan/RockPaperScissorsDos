<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>RockPaperScissorsDos</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h3>(hu)MAN VS MACHINE</h3>
    <div data-input = "newGame" class = "button" value = "NEW GAME">
        <input id = "newGame" class= "btn" type = "button" value = "NEW GAME";>
    </div>
    <img src="https://boardgamestrategyblog.files.wordpress.com/2016/12/rock-paper-scissors.png?w=653" alt = "rockpaperscissors">
   
  
    <div class = 'buttons'>

        <div data-input = "rock" class = "button">
            <input id="rock" class = "btn" type = "button" value = "ROCK">     
        </div>
        <div data-input = "paper" class = "button">
            <input id="paper" class = "btn" type = "button" value = "PAPER">     
        </div>
        <div data-input = "scissors" class = "button">
            <input id="scissors" class = "btn" type = "button" value = "SCISSORS">     
        </div>
    </div>
    <div id = "resultDiv"></div>
</body>

<script>
        let playerPoint = 0;
        let computerPoint = 0;
        let roundNumber = 1;
        let roundResult ;
        let resultShown = 0;

       // const message = document.createElement('p');
        
        //const h1 = document.querySelector('h1');

        //document.body.appendChild(resultDiv);


        document.getElementById("rock").addEventListener("click", rock);
        document.getElementById("paper").addEventListener("click", paper);
        document.getElementById("scissors").addEventListener("click", scissors);

        function rock(){
            playRound("rock", playerPoint, computerPoint, roundNumber);
        }
        function paper(){
            playRound("paper", playerPoint, computerPoint, roundNumber);
        }
        function scissors(){
            playRound("scissors", playerPoint, computerPoint, roundNumber);
        }

        function showResult(computerChoice, roundResult, playerPoint, computerPoint){
            const resultDiv = document.getElementById('resultDiv')
            const result = document.createElement('div');
            result.id = "result";
            let resultOut = '<br>Round: ' +roundNumber+ '<br><br>Computer chose: ' +computerChoice+ '<br><br>' + roundResult+
                '<br><br>Player score: ' +playerPoint+ '<br><br>' + 'computer score: ' + computerPoint;
            result.innerHTML = resultOut;
            resultDiv.appendChild(result);
            resultShown = 1;
           
            if (playerPoint === 5 || computerPoint === 5) {
                if(playerPoint === 5){
                    clear();
                    roundResult = `Congratulations, you have utterly defeated the robot overlords ${playerPoint} to ${computerPoint} `;
                    reset();
                }else if(computerPoint === 5){
                    clear();
                    roundResult = `Humanity will forever remember this terrible loss of ${computerPoint} to ${playerPoint} `;
                    reset();
                }
                playerScore = 0;
                computerScore = 0;
            }
        }

        function computerPlay () {
           const choiceNumber = Math.floor(Math.random() * 3);
           if (choiceNumber === 0) {
                return 'rock';
            } else if (choiceNumber === 1) {
                return 'paper';
            }
            return 'scissors';
        }

        function reset(){
            computerPoint=0;
            playerPoint=0;
            roundNumber=0;
            alert("Play again?");
        }
        function clear(){
            const resultDiv = document.getElementById('resultDiv')
            const result = document.getElementById('result')
            resultDiv.removeChild(result);
        }

        function playRound (input, playerPoint, computerPoint, roundNumber) {

            let playerChoice = input;
            let computerChoice = computerPlay();
            let roundPoint = 0;
            let output = 0;
            
            console.log(computerChoice);
            console.log(playerChoice);


            if(resultShown===1){
                clear();
            }

            if ((playerChoice === 'rock' && computerChoice === 'paper')||
                (playerChoice === 'paper' && computerChoice === 'scissors')|| 
                (playerChoice === 'scissors' && computerChoice === 'rock')) {
                    computerPoint++;
                    roundPoint = 1;  
                    roundResult = `You Lose! ${computerChoice} beats ${playerChoice}`;
                        
            }else if((playerChoice === 'scissors' && computerChoice === 'paper') ||
                (playerChoice === 'rock' && computerChoice === 'scissors') ||
                (playerChoice === 'paper' && computerChoice === 'rock')){
                    playerPoint++;
                    roundPoint = 2;
                    roundResult = `You Win! ${playerChoice} beats ${computerChoice}`;  
            }else {
                roundpoint = 0;
                roundResult = 'Tie!'
            } 
            roundNumber ++;
            showResult (computerChoice, roundResult, playerPoint, computerPoint);          
        
            return computerPoint;
            return playerPoint;
            console.log(roundPoint);

        }       
        
    </script>

</html>